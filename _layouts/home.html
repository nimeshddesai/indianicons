---
layout: default
---

{% include blog_head.html %}
<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  <!-- Introduction -->
  <section id="introduction">
    <p>This platform aims to shine a light on unsung Iconic Indians across various fields. These remarkable individuals have made significant contributions but are often forgotten. By sharing their stories, we aim to inspire and educate, bringing these lesser-known heroes into the spotlight.
    </p>
    {%- assign about = site.pages | where: "path", 'about.md' | first -%}
    <p>This blog contains stories of {{ site.posts | size }} such iconic Indians. To know more about our vision, click on 
      <a href="{{ about.url | relative_url }}">
        {{ about.title | escape }}
      </a>
    </p>
    <p>
      <a href="{{ "/search/" | relative_url }}">Search Icons <button type="submit" style="padding: 5px;">üîç</button></a>
    </p>
    <p>
      {%- assign indianheroesquiz = 'https://indianheroesquiz.netlify.app/' -%}
      Checkout <a href="{{ indianheroesquiz | relative_url }}" target="_blank" rel="noopener noreferrer">Indian Heroes Quiz</a> to test your knowledge.
    </p>
  </section>
  <hr>
  <!-- Story of the day -->
  <section id="story-of-the-day">
    
    <h2>Story of the day <a href="#" id="refresh-story" style="font-size: 0.7em; font-weight: normal; text-decoration: none;">üîÑ Refresh</a></h2>
    <!-- Fetch the current day and month -->
      {% assign current_day = 'now' | date: "%d" %}
      {% assign current_month = 'now' | date: "%m" %}
      <!-- Initialize an empty array to store matching posts -->
      {% assign matching_posts = "" | split: "," %}

      <!-- Loop through all posts -->
      {% for post in site.posts %}
        {% assign post_day = post.date | date: "%d" %}
        {% assign post_month = post.date | date: "%m" %}
        
        <!-- Check if the post's day and month match the current day and month -->
        {% if post_day == current_day and post_month == current_month %}
          {% assign matching_posts = matching_posts | push: post %}
        {% endif %}
      {% endfor %}
      <!-- Check if there are matching posts -->
      <!-- Select a random post -->
      {% if matching_posts.size > 0 %}
        {% assign random_post = matching_posts | sample %}
      {% else %}
        {% assign random_post = site.posts | sample %}
      {% endif %}
      <article id="story-article">
      <h3><a href="{{ random_post.url }}" id="story-title-link">{{ random_post.title }}</a></h3>
      <div id="story-content">
      {% capture random_post_content %}
      {{ random_post.content | markdownify }}
      {% endcapture %}
      {% assign paragraphs = random_post_content | split: "<p>" %}
      {% for paragraph in paragraphs %}
      {% if forloop.index0 > 0 and forloop.index0 < 3 %}
        <p>{{ paragraph }}</p>
      {% endif %}
      {% endfor %}
      </div>
      <p><a href="{{ random_post.url }}" id="story-read-more">(read the full story)</a></p>
    </article>
    
    <!-- Embed posts data for JavaScript refresh functionality -->
    <script>
      (function() {
        // Get current day and month
        const now = new Date();
        const currentDay = String(now.getDate()).padStart(2, '0');
        const currentMonth = String(now.getMonth() + 1).padStart(2, '0');
        
        // Posts data embedded from Jekyll
        const allPosts = [
          {% for post in site.posts %}
          {
            url: "{{ post.url | relative_url }}",
            title: {{ post.title | jsonify }},
            content: {{ post.content | markdownify | jsonify }},
            date: "{{ post.date | date: '%Y-%m-%d' }}",
            day: "{{ post.date | date: '%d' }}",
            month: "{{ post.date | date: '%m' }}"
          }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ];
        
        // Filter posts matching current day and month
        const matchingPosts = allPosts.filter(post => 
          post.day === currentDay && post.month === currentMonth
        );
        
        // Function to get random post based on the logic
        function getRandomPost() {
          const postsToUse = matchingPosts.length > 0 ? matchingPosts : allPosts;
          return postsToUse[Math.floor(Math.random() * postsToUse.length)];
        }
        
        // Function to extract image and paragraphs matching Jekyll logic
        function extractContent(content) {
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = content;
          
          let result = '';
          
          // Extract image (first img tag)
          const images = tempDiv.querySelectorAll('img');
          if (images.length > 0) {
            result += images[0].outerHTML;
          }
          
          // Extract paragraphs matching Jekyll logic (2nd and 3rd paragraphs)
          const paragraphs = tempDiv.querySelectorAll('p');
          // Match Jekyll logic: forloop.index0 > 0 and < 3 means indices 1 and 2
          for (let i = 1; i < Math.min(2, paragraphs.length); i++) {
            result += paragraphs[i].outerHTML;
          }
          
          return result;
        }
        
        // Function to refresh the story
        function refreshStory() {
          const randomPost = getRandomPost();
          const titleLink = document.getElementById('story-title-link');
          const readMoreLink = document.getElementById('story-read-more');
          const contentDiv = document.getElementById('story-content');
          
          if (titleLink && readMoreLink && contentDiv) {
            titleLink.textContent = randomPost.title;
            titleLink.href = randomPost.url;
            readMoreLink.href = randomPost.url;
            contentDiv.innerHTML = extractContent(randomPost.content);
          }
        }
        
        // Attach refresh handler
        document.addEventListener('DOMContentLoaded', function() {
          const refreshLink = document.getElementById('refresh-story');
          if (refreshLink) {
            refreshLink.addEventListener('click', function(e) {
              e.preventDefault();
              refreshStory();
            });
          }
        });
      })();
    </script>
  </section>
  <hr>
  <!-- Categories -->
  <section id="categories">
    {%- assign default_paths = site.pages | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}
    <h2 class="post-list-heading">{{ page_paths.list_title | default: "Categories" }}</h2>
    <br>
    <ul class="post-list">
      {%- for path in page_paths -%}
        <li>
          {%- assign my_page = site.pages | where: "path", path | first -%}
          {%- if my_page.title and my_page.title != "About" and my_page.title != "Settings" and my_page.title != "Search" -%}
              <a class="post-link" href="{{ my_page.url | relative_url }}">
                {{ my_page.title | escape }}
              </a>
          {%- endif -%}
        </li>
      {%- endfor -%}
    </ul>
  </section>
</div>

